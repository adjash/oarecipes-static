---
import { Image } from "astro:assets";
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const recipes = await getCollection("recipes");
---

<Layout>
  <div class="mx-auto max-w-5xl px-4 py-10">
    <h1 class="mb-8 text-3xl font-bold tracking-tight">Recipes</h1>

    <ul class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
      {
        recipes.map((recipe) => (
          <li class="overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm transition hover:shadow-lg">
            <a
              href={`/recipes/${recipe.slug}`}
              class="flex h-full flex-col no-underline"
            >
              <Image
                src={recipe.data.image}
                alt={recipe.data.title}
                class="aspect-[4/3] w-full object-cover"
              />

              <div class="flex flex-1 flex-col p-4">
                <h2 class="mb-3 text-xl font-semibold leading-snug text-gray-900">
                  {recipe.data.title}
                </h2>

                <ul class="mt-auto flex flex-wrap gap-2">
                  {recipe.data.tags.map((tag) => (
                    <li class="rounded-full bg-gray-100 px-3 py-1 text-sm text-gray-600">
                      {tag}
                    </li>
                  ))}
                </ul>
              </div>
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</Layout>
